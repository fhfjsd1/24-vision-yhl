![img](https://i0.hdslb.com/bfs/new_dyn/791944995fff725f42c7f5a9b64f8567100423098.png@1295w.webp)

# 华南虎视觉组实习生任务

实习生姓名：于浩林

## 一、公共任务

### 装甲板识别

#### 代码思路

1. 包含了必要的OpenCV库和其他标准C++库。

2. 使用`VideoCapture`打开了指定路径下的视频文件"/home/taylor/testcpp/24-vision-yhl-1/rectangle/rec.avi"。如果无法打开视频文件，则显示错误消息并退出。

3. 使用`VideoWriter`设置了一个输出视频文件，文件名为"output_video.avi"。视频使用XVID编解码器进行编码，并以每秒30帧的帧率进行保存。

4. 进入循环以处理视频的每一帧。

5. 在循环内部，使用`cap >> frame`从视频中读取一帧。

6. 对帧应用计算机视觉操作：

   - 使用`cvtColor`将帧从BGR颜色空间转换为HSV颜色空间。
   - 定义了HSV颜色空间中黄色的颜色范围。
   - 创建一个掩码以隔离帧中的黄色区域。
   - 使用形态学操作来消除掩码中的噪声。

7. 使用霍夫线变换（被注释掉）来检测掩码中的黄色线条。标记为“失败”。

8. 使用`findContours`在黄色掩码中查找轮廓。仅考虑面积大于100像素的轮廓。

9. 计算检测到轮廓的平均中心。

10. 找到每个有效轮廓内的顶部和底部点，并将它们添加到`extremepoints`向量中。

11. 使用检测到的`extremepoints`的大小和相机参数计算深度（从相机到对象的距离）。

12. 使用`solvePnP`计算相机坐标系中的`extremepoints`的三维坐标。

13. 在终端中显示计算得到的深度、旋转向量和平移向量。

14. 在帧中绘制连接每个轮廓的顶部和底部点的线。

15. 使用`putText`在帧上显示深度信息和一条注释。

16. 将处理过的帧写入输出视频。

17. 检查用户是否按下ESC键，如果按下ESC键，则退出循环。

18. 在处理所有帧后，释放视频捕获和视频写入对象，并关闭所有OpenCV窗口。

#### 遇到问题及解决思路

1. **视频文件路径问题**：
   - 问题：代码中指定了视频文件的路径为`"/home/taylor/testcpp/24-vision-yhl-1/rectangle/rec.avi"`，这个路径在不同系统上可能不同，或者文件可能不存在。
   - 解决思路：确保视频文件的路径是正确的，并且文件存在。可以使用相对路径传递视频文件路径，以便更灵活地处理不同的文件。

2. **黄色线条检测问题**：
   - 问题：代码中使用Hough Line Transform来检测黄色线条，但这部分被注释掉，并且标记为“失败”。
   - 解决思路：如果需要检测黄色线条，可以尝试调整Hough变换的参数，如阈值、最小线段长度和最大间隔等，以获得更好的检测结果。也可以考虑使用其他线条检测算法或颜色检测方法。（因为可能用不上，所以没有继续深入研究,最终选用了其他检测方法）

3. **异常处理问题**：
   - 问题：代码中缺少一些异常处理机制，如打开视频失败或者相关操作失败时的处理。
   - 解决思路：添加适当的异常处理代码，以处理可能的错误情况，并提供有用的错误信息。

#### 效果图

[image](9B4E7126709BB13D3110BAC472EE4581.png)

#### 总结




## 二、专属方向（神经网络）任务

1. 代码思路
***部分代码已完成，待后续补充相关报告***

2. 遇到问题
3. 解决思路
4. 效果图
5. 总结

## 三、总结



运行效果地址：

git仓库地址：
[GitHub仓库链接](https://github.com/fhfjsd1/24-vision-yhl.git "访问yhl的仓库")



